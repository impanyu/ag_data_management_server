{% extends 'layouts/base.html' %}

{% block title %} Tables {% endblock title %}

{% block content %}

<div class ="bg-unl"  style="font-size:1.25rem">
 <div class="card" style = "border-radius:0px;padding:30px">
   <header style="margin-bottom:30px">
  <h1 style="font-size:1.75rem">Documentation</h1>
   </header>
     <section id="content"  style="margin-bottom:40px">
  <h2 style="font-size:1.5rem">Content</h2>
  <nav>
    <ul >
        <li><a href="#introduction">Introduction</a></li>
        <li><a href="#architecture">System Architecture</a></li>
        <li><a href="#mode">Mode</a></li>
        <!--<li><a href="#meta">Meta Data</a></li>-->
        <li><a href="#search_module">Search</a></li>
        <li><a href="#file">File Management</a></li>
       <li><a href="#data_tools_and_models">Data, Tools and Models</a></li>
        <li><a href="#running_tools">Running Tools</a></li>
        <li><a href="#training_models">Training Models</a></li>
        <li><a href="#pipeline">Pipeline Management</a></li>
        <li><a href="#collections">Collections</a></li>
        <li><a href="#privacy">Data Privacy</a></li>
        <li><a href="#jupyter">Jupyter</a></li>
        <li><a href="#api">Data API</a></li>
    </ul>
</nav>
     </section>
  <main>
   <section id="introduction" class="row align-items-center " style="margin-bottom:40px">
  <h2 style="font-size:1.5rem">Introduction</h2>
   <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400"><b>Agriculture Data Management and Analytics (ADMA)</b> is a comprehensive data management platform developed for experts within and outside IANR. It is a state-of-the-art solution designed to address the multifaceted challenges faced by modern agriculture. As the world grapples with population growth, climate change, and diminishing natural resources, the need for data-driven innovation in agroecosystems has never been more critical.

ADMA is a comprehensive platform that harnesses the power of advanced technologies, such as IoT, high-resolution sensors, and cloud computing, to facilitate data collection, integration, and analysis across various agricultural disciplines. By incorporating the FAIR principles (Findable, Accessible, Interoperable, and Reusable), ADMA aims to break down data silos and promote collaboration among researchers, policymakers, and industry stakeholders.

Key features of the ADMA platform include:</p>

  <ul>
  <li>
   <b>Interactive Data Management and Analysis Portals</b>: Accessible through web GUI, command line, and API, these user-friendly interfaces empower users to manage, analyze, and share data with ease.
  </li>
  <li>
 <b>Scalability and Flexibility</b>: Leveraging the capabilities of High-Performance Computing (HPC), ADMA can efficiently process large volumes of heterogeneous data, while also allowing users to incorporate their own data management and analysis tools.
  </li>
  <li>
<b>Open-source Technology</b>: Built upon a robust framework of open-source technologies, ADMA fosters a collaborative environment for continuous improvement and innovation.
</li>
  <li>
   <b>Pipeline management</b>: ADMA keeps track of different operations on each file, maintains and visualize the pipeline record for each file.
  </li>
 </ul>
<p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">By providing an integrated platform for agricultural data management and analysis, ADMA is poised to play a pivotal role in enhancing the productivity, sustainability, and resilience of our agroecosystems. Join us in revolutionizing the future of agriculture through data-driven insights and informed decision-making.</p>


   </section>

  <section id="architecture" class="row align-items-center" style="margin-bottom:40px">
  <h2 style="font-size:1.5rem" class="col-lg-12 col-12 ">System Architecture</h2>
      <div class="col-lg-2 col-12"></div>
      <div class="col-lg-8 col-12 text-center">
          <figure>
              <a href = "/static/assets/img/documentation/agricultural_data_management_platform.png"><img src="/static/assets/img/documentation/agricultural_data_management_platform.png" style="width:100%" ></a>
               <figcaption ><b>Figure 1. System Architecture</b></figcaption>
          </figure>
      </div>
      <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">
          Figure 1 illustrates the overall architecture of the systems. There are six components: data source, batch processing, real-time processing, actuators, server and Front-end.
      </p>
<ul>
      <li>
          <b>Data source</b> is mainly composed of four parts: RDBMS, NoSQL database and file system for storing the historical data, sensors for collecting real-time data streams, metadata for storing the formats and configuration about all the data and tools.
</li>
<li>
    <b>Batch processing </b>component is the engine of the whole system, where big data processing occurs. This component runs in containerized environment. The containerized environment can host various types of containerized tools such as R, Python, Matlab, Tensorflow, Cuda, MPI and many more customized tools for the specific disciplines. There is a container scheduler such as swarm or Kubernetes to manage the running of containers. Various user defined data processing and model training can be conducted in the container environment.
</li>
      <li>
<b>Real-time processing</b> component connects to the sensors and stream the real-time data for further processing. Containerized environment is also supported, where hosted pre-trained models and customized tools can process data and make decisions in real-time or near real-time fashion. The real time data from sensors can be fed to the data processing module and the decisions and commands can be output to the actuator to execute. This component is a necessary complement to batch processing when real-time analysis and control is required and relatively low accuracy is tolerated.
      </li>
      <li>
<b>Actuator</b> is included in the system to make it more like a fully functioning control system. Connected to the real-time processing component, the actuator executes the commands/decisions output by the hosted models or user coded tools. The types of actuators vary among different disciplines. For biological system engineering, to name a few, there are actuators such as irrigation systems, robotics and field operation machines.
      </li>
      <li>
<b>Server</b> is the operational handler of the whole system. Data management module is responsible for the ordinary operation such as file search, retrieve, upload, delete, update and processing. Version control is also considered in the future implementation. Tool management module keeps the information of the tool sets used in the system. Model management module is responsible for maintaining all the pre-trained models. Data processing module talks to and manages the batch processing and real-time processing components. This module is an umbrella module for all the data processing jobs such as data pre-processing, data co-locating, batch processing, model training,  model hosting, real-time processing, etc.  Security and authentication module guarantees the data storage & transmission is secure and each user has a separate access permission and view to the data. Data service API acts as the portal for the front-end to manipulate the data in our system.
      </li>
      <li>
          <b>Front-end</b> runs on the user side machine and can take the forms of web browser, command-line or third-party software. The front end communicates with the server through the data service API. Users of our system can conduct ordinary file management operations and initiate data processing requests to the system. The analytical results can be displayed in the front end for the user to view.
      </li>
  </ul>


  </section>


       <section id="mode" class="row align-items-center "style="margin-bottom:40px">
  <h2 style="font-size:1.5rem"> Mode </h2>
       <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">ADMA maintains four modes, namely data, tool, model and collection, as the first class species in the system.</p>
           <ul>
               <li><b>Data</b> is the most general and default mode. </li>
               <li><b>Tool</b> represents any native or user uploaded programs or scripts. Tools operate on data and can form pipelines of various forms.</li>
               <li><b>Model</b> represents the files generated from any machine learning training process. It is hybrid of data and tools. When training by some training program, it can be considered as data. When inferring, it can be considered as tool.</li>
               <li><b>Collection</b> is the set of data, tool and model. The user can create their own collection and include any of their data, tools and models within the collection.</li>
           </ul>
   </section>

   <section id="search_module" class="row align-items-center "style="margin-bottom:40px">
   <h2 style="font-size:1.5rem" class="col-lg-12 col-12 ">  Search </h2>
       <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">ADMA supports <a href="/search.html?current_path={{user}}" >search </a> by various criteria, including by key word and by common metadata such as category, mode, format, label, priviledge, realtime/non-realtime, time range, spatial range (Figure 2).</p>
       <div class="col-lg-2 col-12"></div>
      <div class="col-lg-8 col-12 text-center">
          <figure>
              <a href = "/static/assets/img/documentation/search_criteria.png"><img src="/static/assets/img/documentation/search_criteria.png" style="width:100%" ></a>
               <figcaption><b>Figure 2. Search Filter</b></figcaption>
          </figure>
      </div>
        <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">Search results will be displayed on map based on their locations (Figure 3), or visualized on a 2D space based on the similarity of their metadata (Figure 4), where each dot represents a file or folder and each color denotes a mode.</p>
       <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
              <a href="/static/assets/img/documentation/search_results_on_map.png "><img src="/static/assets/img/documentation/search_results_on_map.png" style="width:100%" ></a>
               <figcaption><b>Figure 3. Search Results on Map</b></figcaption>
          </figure>
      </div>
       <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
              <a href ="/static/assets/img/documentation/search_results_on_2d.png" ><img src="/static/assets/img/documentation/search_results_on_2d.png" style="width:100%" ></a>
               <figcaption><b>Figure 4. Search Results on 2D Space</b></figcaption>
          </figure>
      </div>

          <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">Search results will also be displayed in list as typical cloud storage system (Figure 5).</p>
         <div class="col-lg-8 col-12 text-center mx-auto">
          <figure>
              <a href = "/static/assets/img/documentation/search_results.png"><img src="/static/assets/img/documentation/search_results.png" style="width:100%" ></a>
               <figcaption><b>Figure 5. Search Results</b></figcaption>
          </figure>
      </div>

   </section>
   <section id="file" class="row align-items-center "style="margin-bottom:40px">
  <h2 style="font-size:1.5rem"> File Management</h2>
       <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400"><a href="/files.html?current_path={{user}}" >File management</a> module in ADMA supports basic operations on file such as: create, upload, delete, move, copy, download, edit (Figure 6). Each user will be assigned a root dir named by their username: "/username"
           and all the data will be put into the directory: "/username/ag_data". Each user will also see a folder named "public_data" under "/username/ag_data", which contains all the public data from other users. ADMA keeps a metadata panel for each folder or file, which can be used to update various meta data items (Figure 7).
         For user uploaded program or script, the system presents a tool panel for execution of the tool and we'll introduce it in <a href="#running_tools">Running Tools</a> . Each folder or file also has a pipeline panel which will be introduced in <a href="#pipeline">Pipeline Management</a>. </p>

         <div class="col-lg-6  col-12 text-center mx-auto">
          <figure>
              <a href = "/static/assets/img/documentation/files.png"><img src="/static/assets/img/documentation/files.png" style="width:100%" ></a>
               <figcaption><b>Figure 6. File Management</b></figcaption>
          </figure>
      </div>

       <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
          <a href="/static/assets/img/documentation/meta_data.png"><img src="/static/assets/img/documentation/meta_data.png" style="width:100%" ></a>
               <figcaption><b>Figure 7. Metadata Panel</b></figcaption>
          </figure>
      </div>
      <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">ADMA provides native supports for visualizing or editing some frequently used data formats, such as tif, shp files and scripting languages such as python, R and matlab (Figure 8). </p>

       <div class="col-lg-12 col-12 text-center mx-auto">
          <figure>
          <a href="/static/assets/img/documentation/tif.png"><img src="/static/assets/img/documentation/tif.png" style="width:45%"></a>
             <a href="/static/assets/img/documentation/shp.png"> <img src="/static/assets/img/documentation/shp.png" style="width:45%"></a>
             <a href="/static/assets/img/documentation/matlab.png"><img src="/static/assets/img/documentation/matlab.png" style="width:45%"></a>
             <a href="/static/assets/img/documentation/python.png"> <img src="/static/assets/img/documentation/python.png" style="width:45%"></a>


               <figcaption><b>Figure 8. Visualizing and Editing Files of Various Formats</b></figcaption>
          </figure>
      </div>


   </section>

   <section id="data_tools_and_models" class="row align-items-center "style="margin-bottom:40px">
  <h2 style="font-size:1.5rem"> Data, Tools and Models</h2>
       <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">ADMA has a separate page for manage <a href="/data.html?current_path={{user}}" >data</a>, <a href="/tools.html?current_path={{user}}">tools</a> and <a href="/models.html?current_path={{user}}">models</a>. The three pages will list both user's privately owned data and public data.</p>


   </section>
      <section id="running_tools" class="row align-items-center "style="margin-bottom:40px">
  <h2 style="font-size:1.5rem">Running Tools</h2>
          <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400"> For each user uploaded tool, ADMA displays a tool panel, in which the user can edit, add or remove command-line arguments of the tool (Figure 9). If the argument is a path, ADMA allows user to select files in their ag_data folder (Figure 10).
            Once "Run" button is clicked, a message will be prompted indicating the program starts running in a containerized environment(Figure 11). Then the user can check the execution status of the program by scroll to the bottom of the metadata panel, where the container id, docker image, status and running time of the running instances of the tool will be displayed (Figure 12).
              While the tool is running, there will also a "green" dot before the name of the tool in the file management system. After the program stops, the user can check the output in their specified location.
          </p>

          <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
              <a href="/static/assets/img/documentation/tool_cmd_line.png"><img src="/static/assets/img/documentation/tool_cmd_line.png" style="width:100%" ></a>
               <figcaption><b>Figure 9. Editable Tool Panel</b></figcaption>
          </figure>
      </div>

          <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
              <a href="/static/assets/img/documentation/tool_file_selection.png"><img src="/static/assets/img/documentation/tool_file_selection.png" style="width:100%" ></a>
               <figcaption><b>Figure 10. File Selection</b></figcaption>
          </figure>
      </div>

          <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
           <a href="/static/assets/img/documentation/tool_message.png"><img src="/static/assets/img/documentation/tool_message.png" style="width:100%" ></a>
               <figcaption><b>Figure 11. Start Execution Message</b></figcaption>
          </figure>
      </div>

          <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
           <a href="/static/assets/img/documentation/tool_running_instances.png"><img src="/static/assets/img/documentation/tool_running_instances.png" style="width:100%" ></a>
               <figcaption><b>Figure 12. Running Instances of a Program</b></figcaption>
          </figure>
      </div>


   </section>

      <section id="training_models" class="row align-items-center "style="margin-bottom:40px">
  <h2 style="font-size:1.5rem">Training Models</h2>
      </section>

      <section id="pipeline" class="row align-items-center "style="margin-bottom:40px">
  <h2 style="font-size:1.5rem">Pipeline Management</h2>
         <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400"> For each file or folder, ADMA keeps track of its history and keeps a pipeline panel illustrating the position of the file or folder in the pipeline, together with the upstream and downstream locations and corresponding operations of each step. ADMA keeps track of all native operations and user submitted tools.
          For instance, in Figure 13, when user uploads a file named "21_E1801_A103_rgba_green.png", the pipeline will show it is uploaded from external resource. In Figure 14, when user create a new folder, the pipeline of it will indicate it is created from "null". Figure 15 shows the pipeline of a user uploaded TIF file being converted to PNGs for
             each of its band. Figure 16 illustrates how a user defined tool: "calculate_ndvi.py" converts two user uploaded TIF files and generates one image file: "ndvi.png".
         </p>

            <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
           <a href="/static/assets/img/documentation/pipeline_upload.png"><img src="/static/assets/img/documentation/pipeline_upload.png" style="width:100%" ></a>
               <figcaption><b>Figure 13. Pipeline of Uploading a File</b></figcaption>
          </figure>
      </div>

          <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
           <a href="/static/assets/img/documentation/pipeline_new.png"><img src="/static/assets/img/documentation/pipeline_new.png" style="width:100%" ></a>
               <figcaption><b>Figure 14. Pipeline of Creating a Folder</b></figcaption>
          </figure>
      </div>

          <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
           <a href="/static/assets/img/documentation/pipeline_tif_to_image.png"><img src="/static/assets/img/documentation/pipeline_tif_to_image.png" style="width:100%" ></a>
               <figcaption><b>Figure 15. Pipeline of Converting TIF to PNG</b></figcaption>
          </figure>
      </div>

          <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
           <a href="/static/assets/img/documentation/pipeline_calculate_ndvi.png"><img src="/static/assets/img/documentation/pipeline_calculate_ndvi.png" style="width:100%" ></a>
               <figcaption><b>Figure 16. Pipeline of User Uploaded Tool</b></figcaption>
          </figure>
      </div>



   </section>
   <section id="collections" class="row align-items-center "style="margin-bottom:40px">
  <h2 style="font-size:1.5rem"> Collections</h2>
       <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">
           Besides original file hierarchies, <a href="/collections.html?current_path={{user}}/collections">collections</a> are another way to organize data. ADMA allows user to create new collection (Figure 17) and add their data to the collection (Figure 18). Collection is also one of the 4 mode in ADMA, besides data, tools and models, which means
           collection is searchable and each collection has a metadata page.

       </p>
        <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
           <a href="/static/assets/img/documentation/collections.png"><img src="/static/assets/img/documentation/collections.png" style="width:100%" ></a>
               <figcaption><b>Figure 17. Collections Page</b></figcaption>
          </figure>
      </div>

          <div class="col-lg-6 col-12 text-center mx-auto">
          <figure>
         <a href="/static/assets/img/documentation/add_to_collection.png"> <img src="/static/assets/img/documentation/add_to_collection.png" style="width:100%" ></a>
               <figcaption><b>Figure 18. Add to Collection Menu</b></figcaption>
          </figure>
      </div>

   </section>
   <section id="privacy" class="row align-items-center "style="margin-bottom:40px">
  <h2 style="font-size:1.5rem"> Data Privacy</h2>
       <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">
         ADMA protects data privacy by differentiating private data and public data. User can choose to publish their data by toggling the locker icon and updating the metadata of a folder or file. Once a file is made public, all its sub-folders and files within in will be
           recursively made public, and vice versa. All the public data can be viewed under the folder: "/username/ag_data/public_data".

       </p>
       <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">
        Each user is assigned a separate root directory for their data, which is further consolidated by containerized environment for running user-defined tool and jupyter notebook.
       </p>


   </section>
   <section id="jupyter" class="row align-items-center "style="margin-bottom:40px">
  <h2 style="font-size:1.5rem"> JupyterHub</h2>
       <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">
           To provide the users with more flexibility, ADMA connects with <a href="https://jupyter.org/hub">JupyterHub</a>. Each user can create their own <a href="https://jupyter.org/">JupyterLab</a>, which is the latest web-based interactive development environment for notebooks, code, and data
           in the field of data science, scientific computing, computational journalism, and machine learning. User can utilize the same workspace to put their data and tools in both ADMA and JupyterLab, in this way the user can shift between two systems seamlessly.
           Data privacy and safety is protected by running JupyterLab for each user in containerized environment. Please pay attention that ADMA can not keep track of the operations conducted through JupyterLab, which means the pipeline for any operations in JupyterLab will not be automatically generated.Figure 19 is the landing page for each user.

       </p>

        <div class="col-lg-8 col-12 text-center mx-auto">
          <figure>
         <a href="/static/assets/img/documentation/jupyter.png"> <img src="/static/assets/img/documentation/jupyter.png" style="width:100%" ></a>
               <figcaption><b>Figure 19. Landing Page of JupyterLab</b></figcaption>
          </figure>
      </div>

   </section>
      <section id="api" class="row align-items-center "style="margin-bottom:40px">
  <h2 style="font-size:1.5rem">Data API</h2>
          <p class="col-lg-12 col-12" style="font-size:1.25rem; font-weight:400">
               ADMA exposes several data APIs to facilitate the data retrieval by authorized third-party programs. Data API is in REST style and the returned value is in human readable JSON format.
              Currently exposed APIs are listed as follows:
          </p>
 <ul class="col-lg-12 col-12">
    <!-- <li><span style="background-color: #eee"><b>/api_meta_data?path=<span style="color:red">{path}</span>&key=<span style="color:red">{key}</span></b></span>
         <p style="font-size:1.25rem; font-weight:400">This API will retrieve the metadata for any {path} which are visible to the user when the a {key} is specified.</p>
         <p style="font-size:1.25rem; font-weight:400">For example, if the request url is <span style="background-color: #eee">unlagdatamanagement.hopto.org/api_meta_data?path=/ypan12/ag_data/green/21_E1801_AI03_index_green.shp&key=dwMmCIYP8ds</span>, we can retrieve the metadata for the file: /ypan12/ag_data/green/21_E1801_AI03_index_green.shp.
         The returned metadata will be in JSON format as follows:</p>
              <pre class="doc_code"><code class="language-json">
 {
 "mode": ["Data"],
 "category": [],
 "format": ["Shape"],
 "label": [],
 "time_range": {"start": "01/01/2030 00:00:00", "end": "01/01/2030 00:00:00"},
 "spatial_range": {"southwest": {"lat": 41.17456760772918, "lng": -96.4644417742758}, "northeast": {"lat": 41.17873101181431, "lng": -96.45313039705833}},
 "abs_path": "/data/ypan12/ag_data/green/21_E1801_AI03_index_green.shp",
 "subdirs": [],
 "public": "True",
 "name": "21_E1801_AI03_index_green.shp",
 "realtime": "Non-Realtime",
 "upstream": {"upload": ["external resources"]},
 "downstream": {"shp to image": ["/data/ypan12/ag_data/green/21_E1801_AI03_index_green.shp_col_green.png", "/data/ypan12/ag_data/green/21_E1801_AI03_index_green.shp_col_geometry.png"]},
 "introduction": "",
 "owner": "ypan12",
 "native": {
            "fields": [["DeletionFlag", "C", 1, 0], ["green", "N", 24, 15]],
            "numRecords": 115938,
            "shapeType": 11,
            "shapeTypeName": "POINTZ",
            "type": "FeatureCollection",
            "columns": ["green", "geometry"],
            "spatial_range": {"southwest": {"lat": 41.17456760772918, "lng": -96.4644417742758}, "northeast": {"lat": 41.17873101181431, "lng": -96.45313039705833}},
            "name": "21_E1801_AI03_index_green.shp",
            "created_time": "04/24/2023, 18:38:24",
            "access_time": "04/21/2023, 22:21:46",
            "size": 4173868
             }
 }
</code></pre>
         </p>
     </li>
     <li><span style="background-color: #eee"><b>/api_list_sub_items?path=<span style="color:red">{path}</span>&key=<span style="color:red">{key}</span></b></span>
        <p style="font-size:1.25rem; font-weight:400">This API will list the files or directories within any {path} which are visible to the user when the a {key} is specified.</p>
        <p style="font-size:1.25rem; font-weight:400">For example, if the request url is <span style="background-color: #eee">/api_list_sub_items?path=/ypan12/ag_data/green&key=dwMmCIYP8ds</span>,
            we can retrieve all the files and folders inside the directory: /ypan12/ag_data/green. </p>
         The returned metadata will be in JSON format as follows:
              <pre class="doc_code"><code class="language-json">
 [
 "/ypan12/ag_data/green/0",
 "/ypan12/ag_data/green/1",
 "/ypan12/ag_data/green/2",
 "/ypan12/ag_data/green/21_E1801_AI03_green.info",
 "/ypan12/ag_data/green/21_E1801_AI03_green.pool",
 "/ypan12/ag_data/green/21_E1801_AI03_index_green.dbf",
 "/ypan12/ag_data/green/21_E1801_AI03_index_green.prj",
 "/ypan12/ag_data/green/21_E1801_AI03_index_green.shp",
 "/ypan12/ag_data/green/21_E1801_AI03_index_green.shp_col_geometry.png",
 "/ypan12/ag_data/green/21_E1801_AI03_index_green.shp_col_green.png",
 "/ypan12/ag_data/green/21_E1801_AI03_index_green.shx",
 "/ypan12/ag_data/green/21_E1801_AI03_index_green.tfw",
 "/ypan12/ag_data/green/21_E1801_AI03_index_green.tif",
 "/ypan12/ag_data/green/21_E1801_AI03_index_green.tif_band_1.png",
 "/ypan12/ag_data/green/21_E1801_AI03_rgba_green.jpg",
 "/ypan12/ag_data/green/21_E1801_AI03_rgba_green.kml",
 "/ypan12/ag_data/green/21_E1801_AI03_rgba_green.png",
 "/ypan12/ag_data/green/21_E1801_AI03_rgba_green.prj",
 "/ypan12/ag_data/green/21_E1801_AI03_rgba_green.tfw",
 "/ypan12/ag_data/green/21_E1801_AI03_rgba_green.tif",
 "/ypan12/ag_data/green/21_E1801_AI03_rgba_green.tif_band_1.png",
 "/ypan12/ag_data/green/21_E1801_AI03_rgba_green.tif_band_2.png",
 "/ypan12/ag_data/green/21_E1801_AI03_rgba_green.tif_band_3.png",
 "/ypan12/ag_data/green/21_E1801_AI03_rgba_green.tif_band_4.png",
 "/ypan12/ag_data/green/21_E1801_AI03_rgba_green.tif_band_RGBA.png",
 "/ypan12/ag_data/green/21_E1801_AI03_scale_green.pdf",
 "/ypan12/ag_data/green/4",
 "/ypan12/ag_data/green/Untitled.ipynb",
 "/ypan12/ag_data/green/tiles"
 ]
         </code>
         </pre>
     </li>-->

     <li><span style="background-color: #eee">/api/api-token-auth/</span></b></span>
        <p style="font-size:1.25rem; font-weight:400">Calling this API will generate and return the auth token for authenticating the users' api usage</p>
        <p style="font-size:1.25rem; font-weight:400"> The users can send HTTP POST request to this API in shell:</p>
              <pre class="doc_code"><code class="language-bash">
curl -X POST https://adma.hopto.org/api/api-token-auth/ -d "username=&lt;your_username&gt;&password=&lt;your_password&gt;"
             </code>
             </pre>
        <p style="font-size:1.25rem; font-weight:400">Or the API endpoint can be called in python, as follows:</p>
              <pre class="doc_code"><code class="language-python">
import requests

url = https://adma.hopto.org/api/api-token-auth/
username = "&lt;your_username&gt;"
password = "&lt;your_password&gt;"

# The data you'll send in the POST request
payload = {
    "username": username,
    "password": password
}

# Make the POST request to the token endpoint
response = requests.post(url, data=payload)

# Check if the request was successful
if response.status_code == 200:
    # Parse the token from the response
    token = response.json().get('token')
    print("Token:", token)
else:
    # Handle error (e.g., bad credentials, server error)
    print("Error getting token:", response.text)
             </code>
              </pre>
     </li>


     <li><span style="background-color: #eee">/api/meta_data/</span></b></span>
        <p style="font-size:1.25rem; font-weight:400">Calling this API will retrieve the meta data of any specified path under user's home folder</p>
        <p style="font-size:1.25rem; font-weight:400"> In shell, the users can send HTTP GET request to this API, where &lt;local_path_to_save&gt; is where you want to save the retrieved meta data in your local computer, 
            &lt;auth_token&gt; is the token you get from the token generating API, and &lt;file_path&lt; is the path of the file. For instance, 
            if the user "x" want to retrieve the meta data of the file: /x/ag_data/y/z.csv, file_path should be y/z.csv, essentially the path of the file relative to the user's home folder.   
        </p>
              <pre class="doc_code"><code class="language-bash">
curl -o &lt;local_path_to_save&gt; -H "Authorization: Token &lt;auth_token&gt;" https://adma.hopto.org/api/meta_data/?target_path=&lt;file_path&gt;
         </code>
         </pre>
         <p style="font-size:1.25rem; font-weight:400"> The python code querying this API is as follows:</p>
               <pre class="doc_code"><code class="language-python">
import requests

# URL of the API endpoiont for retrieving metadata 
file_path = '&lt;file_path &gt;'
download_url = f'https://adma.hopto.org/api/meta_data/?target_path={file_path}'

# Headers including the Authorization token (if needed)
headers = {'Authorization': f'Token &lt;auth_token&gt;'}

# Sending the GET request to the meta data of the file
response = requests.get(download_url, headers=headers)

# Checking the response from the server
if response.status_code == 200:
    
    local_path_to_save = '&lt;local_path_to_save&gt;'
    
    # Saving the file to disk
    with open(local_path_to_save, 'wb') as f:
        f.write(response.content)
    
    print(f"The meta data is downloaded successfully as {local_path_to_save}.")
else:
    print("Failed to download the meta data:", response.text)
          </code>
          </pre>
         
     </li>

     <li><span style="background-color: #eee">/api/list/</span></b></span>
        <p style="font-size:1.25rem; font-weight:400">Calling this API will retrieve the files or directories within any specified directory path under user's home folder</p>
        <p style="font-size:1.25rem; font-weight:400"> In shell, the users can send HTTP GET request to this API, where &lt;local_path_to_save&gt; is where you want to save the retrieved directory structure in your local computer, 
            &lt;auth_token&gt; is the token you get from the token generating API, and &lt;dir_path&lt; is the path of the directory you want to check. For instance, 
            if the user "x" want to retrieve the structure of the directory: /x/ag_data/y, dir_path should be y, essentially the path of the file relative to the user's home folder.   
        </p>
              <pre class="doc_code"><code class="language-bash">
curl -o &lt;local_path_to_save&gt; -H "Authorization: Token &lt;auth_token&gt;" https://adma.hopto.org/api/list/?target_path=&lt;dir_path&gt;
         </code>
         </pre>
         <p style="font-size:1.25rem; font-weight:400"> The python code querying this API is as follows:</p>
               <pre class="doc_code"><code class="language-python">
import requests

# URL of the API endpoiont for listing dir structure
dir_path = '&lt;dir_path &gt;'
download_url = f'https://adma.hopto.org/api/list/?target_path={dir_path}'

# Headers including the Authorization token (if needed)
headers = {'Authorization': f'Token &lt;auth_token&gt;'}

# Sending the GET request to the structure of the directory
response = requests.get(download_url, headers=headers)

# Checking the response from the server
if response.status_code == 200:
    
    local_path_to_save = '&lt;local_path_to_save&gt;'
    
    # Saving the file to disk
    with open(local_path_to_save, 'wb') as f:
        f.write(response.content)
    
    print(f"The folder structure is downloaded successfully as {local_path_to_save}.")
else:
    print("Failed to download the folder structure:", response.text)
          </code>
          </pre>
         
     </li>





     <li><span style="background-color: #eee">/api/download/</span></b></span>
        <p style="font-size:1.25rem; font-weight:400">Calling this API will download file given the file path under user's home folder</p>
        <p style="font-size:1.25rem; font-weight:400"> In shell, the users can send HTTP GET request to this API, where &lt;local_path_to_save&gt; is where you want to save the downloaded file in your local computer, 
            &lt;auth_token&gt; is the token you get from the token generating API, and &lt;file_to_download&lt; is the path of the file you want to download. For instance, 
            if the user "x" want to download the file: /x/ag_data/y/z.csv, file_to_download should be y/z.csv, essentially the path of the file relative to the user's home folder.   
        </p>
              <pre class="doc_code"><code class="language-bash">
curl -o &lt;local_path_to_save&gt; -H "Authorization: Token &lt;auth_token&gt;" https://adma.hopto.org/api/download/?target_path=&lt;file_to_download&gt;
         </code>
         </pre>
         <p style="font-size:1.25rem; font-weight:400"> The python code querying this API is as follows:</p>
               <pre class="doc_code"><code class="language-python">
import requests

# URL of the API endpoint for downloading 
file_to_download = '&lt;file_to_download &gt;'
download_url = f'https://adma.hopto.org/api/download/?target_path={file_to_download}'

# Headers including the Authorization token (if needed)
headers = {'Authorization': f'Token &lt;auth_token&gt;'}

# Sending the GET request to download the file
response = requests.get(download_url, headers=headers)

# Checking the response from the server
if response.status_code == 200:
    
    local_path_to_save = '&lt;local_path_to_save&gt;'
    
    # Saving the file to disk
    with open(local_path_to_save, 'wb') as f:
        f.write(response.content)
    
    print(f"File downloaded successfully as {local_path_to_save}.")
else:
    print("Failed to download file:", response.text)
          </code>
          </pre>
         
     </li>

     <li><span style="background-color: #eee">/api/upload</span></b></span>
        <p style="font-size:1.25rem; font-weight:400">This API can be used to upload files to any place under the user's home directory</p>
        <p style="font-size:1.25rem; font-weight:400">Shell command to make the API call is as follows:</p>
              <pre class="doc_code"><code class="language-bash">
curl -X POST -F "file=@&lt;local_path&gt;" -F "target_path=&lt;target_path&gt;" -H "Authorization: Token &lt;auth_token&gt;" https://adma.hopto.org/api/upload/
              </code>
         </pre>

         <p style="font-size:1.25rem; font-weight:400">Or the API can be called through python code:</p>
              <pre class="doc_code"><code class="language-python">
import requests

# URL of the API endpoint for uploading
upload_url = 'https://adma.hopto.org/api/upload/'

# The path to the file you want to upload
local_path = '&lt;local_path&gt;'

# Target path where you want the file to be uploaded
target_path = &lt;'target_path&gt;'

# Assuming you have an authentication token
auth_token = 'your_auth_token_here'

# Headers including the Authorization token
headers = {'Authorization': f'Token &lt;auth_token&gt;'}

# The file to be uploaded
files = {'file': open(file_path, 'rb')}

# Additional data
data = {'target_path': target_path}

# Sending the POST request to upload the file
response = requests.post(upload_url, headers=headers, files=files, data=data)

# Closing the file to avoid resource leaks
files['file'].close()

# Checking the response from the server
if response.status_code == 201:
    print("File uploaded successfully.")
else:
    print("Failed to upload file:", response.text)
            </code>
         </pre>
     </li>

     <li><span style="background-color: #eee">/api/run_tool</span></b></span>
        <p style="font-size:1.25rem; font-weight:400">This API can be used to execute user uploaded programs and scripts under the user's home directory</p>
        <p style="font-size:1.25rem; font-weight:400">Shell command to make the API call is as follows. &lt;program_entry_point&gt; is the path of the program or script to ru. There can be variable numbers of arguments, which need to be encoded as url arguments by using the same name "arg_values" </p>
              <pre class="doc_code"><code class="language-bash">
curl  -H "Authorization: Token &lt;auth_token&gt;" https://adma.hopto.org/api/run_tool/?entry_point=&lt;program_entry_point&gt;&arg_values=&lt;arg_value_1&gt;&arg_values=&lt;arg_value_2&gt;...&arg_values=&lt;arg_value_n&gt;
              </code>
         </pre>

         <p style="font-size:1.25rem; font-weight:400">Or the API can be called through python code:</p>
              <pre class="doc_code"><code class="language-python">
import requests

# URL of the API endpoint for uploading
run_tool_url = 'https://adma.hopto.org/api/run_tool/'

# The path to the entry point of the program you want to execute
entry_point = '&lt;program_entry_point&gt;'

# Arguments for the program
arguments = [&lt;arg_value_1&gt;,&lt;arg_value_2&gt;,...,&lt;arg_value_n&gt;]

#compose the run_tool_url
run_tool_url = run_tool_url+f"?entry_point={entry_point}"
for arg in arguments:
    run_tool_url += f"&arg_values={arg}"

# Assuming you have an authentication token
auth_token = 'your_auth_token_here'

# Headers including the Authorization token
headers = {'Authorization': f'Token &lt;auth_token&gt;'}

# Sending the GET request to execute the program
response = requests.get(run_tool_url, headers=headers)

# Checking the response from the server
print(response.json())

            </code>
         </pre>
     </li>



</ul>

   </section>
</main>

  </div>


</div>


{% include "includes/footer.html" %}

{% endblock content %}

<!-- Specific JS goes HERE -->
{% block javascripts %}



<script src="https://d3js.org/d3.v6.min.js"></script>



{% endblock javascripts %}
